<!DOCTYPE html>
<html lang="en">
    <head>
    <title></title>
    <meta charset="utf-8">
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--<meta name="description" content="">-->
        <link rel="stylesheet"  href="../html5/jdWP.css"/>
    <link rel="stylesheet"  href="css/lightslider.min.css"/>
<!--     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->
        <link rel="stylesheet" href="../js/jq/jquery.mobile-1.4.5.min.css" />
        <script type="text/javascript" src="../js/jq/jquery.min.js"></script>
        <script type="text/javascript" src="../js/initJQM.js"></script>
        <script type="text/javascript" src="../js/jq/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="../js/ctrlMain.js"></script>
        <script type="text/javascript" src="../slider/slideout.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <script src="js/lightslider.min.js"></script>
    <style>
        /*div{*/
        /*text-shadow: none !important;*/
        /*}*/
        /*span{*/
        /*text-shadow: none !important;;*/
        /*}*/

        .ui-page {
            background:#ffffff !important;
        }

        ul{
            list-style: none outside none;
            padding-left: 0;
            margin: 0;
        }
        li{
            height: 55px;
            text-align:center ;
            vertical-align: bottom;
        }
        .test div
        {
            position: static;
        }

        .lblSymbol1
        {
            height:55px;
            background:#E44E4b;
            align-content: center;
            color: #FFFFFF;
            font-size: 16px
        }
        .lblSymbol2
        {
            height:55px;
            align-content: center;
            background:#2E3E4E;
            color: #FFFFFF;
            font-size: 16px
        }

        .lblSymbol1 span {
            position: relative;
            bottom: -10px;
        }
        .lblSymbol2 span {
            position: relative;
            bottom: -10px;
        }
        .lblSymbol1 img {
            position: relative;
            top:5px;
            left: 30px;
            width: 24px;
            height: 24px;
        }
        .lblSymbol2 img {
            position: relative;
            top:5px;
            left: 30px;
            width: 24px;
            height: 24px;
        }
    </style>

    <script>
        String.prototype.format = function() {
            var result=this;
            if (arguments.length == 0)
                return null;
            for ( var i = 0; i < arguments.length; i++) {
                var re = new RegExp('\\{' + (i) + '\\}', 'gm');
                result = result.replace(re, arguments[i]);
            }
            return result;
        };

        var _curSelect = '' ;
        var _symbolIndex = [] ;
        var _slider = null ;
        function setActiveBtn(selSymbolCode) {
            var key = '#syb_' + selSymbolCode ;


            if ($(_curSelect).length>0) {
                $(_curSelect).css('background','#2E3E4E') ;
                // console.log('_curSelect ->' + _curSelect) ;
            }

            if ($(key).length>0) {
                $(key).css('background','#E44E4b') ;
                // console.log('key ->' + key) ;
                _curSelect = key ;
            }

            _slider.goToSlide(_symbolIndex[selSymbolCode]);
            _slider.refresh();

        }

        function buildBtns(arrSymbols,selSymbolCode) {

            // console.log(selSymbolCode) ;

            // 创建列表项
            function makeListItem(symbol,css) {

                var oLi     = document.createElement('li') ;
                var liID    = 'symbol_' + (Math.random() * 10000 + 1000).toFixed(0) ;
                var imgName = '../skins/jdWP/' + symbol.symbolCode + '_W.png' ;

                var html = '<div id="syb_{0}" class="{1}">' ;
                html    += '<img src="{2}" />' ;
                html    += '<span>{3}</span></div>' ;

                $(oLi).attr('id', liID ) ;
                $(oLi).attr('symbolCode', symbol.symbolCode) ;
                $(oLi).html(html.format(symbol.symbolCode,css,imgName,symbol.symbolName)) ;

                return oLi ;
            }

            var oUl = '#mytest' ;

            // 根据商品数据初始化商品列表
            var selIndex = 0 ;
            var cnt = 4; // arrSymbols.length ;

            for (var i=0; i<cnt; i++)
            {
                var css = 'lblSymbol2' ;

                _symbolIndex[arrSymbols[i].symbolCode] = i ;

                if (arrSymbols[i].symbolCode===selSymbolCode) {
                    selIndex = i ;
                    _curSelect = '#syb_' + selSymbolCode ;
                    css = 'lblSymbol1' ;
                }

                var oItem = makeListItem(arrSymbols[i],css) ;
                $(oUl).append(oItem) ;
            }

            _slider = $("#mytest").lightSlider({
                item:4,
                slideMargin: 5,
                loop:false,
                keyPress:true
            });

            _slider.goToSlide(selIndex);
            _slider.refresh();

        }

        $(document).ready(function() {

            window.parent.$('#btnSymbols').trigger('complete');

            var css = 'div {text-shadow: none !important;} ' ;
            css    += 'span {text-shadow: none !important;}' ;

            $('head').append('<style>' + css + '</style>');

            $('#mytest').on('click', 'li',function(){

                // alert('mytest li') ;
                var symbolCode =  $(this).attr('symbolCode') ;
                setActiveBtn(symbolCode) ;

                window.parent.$('#btnSymbols').trigger('symbolSelect',symbolCode);

            }) ;

        });


    </script>
</head>
<body>
<div id="listBtnSymbols" class="test" style="width: 100%; height: 55px; left: 0px; top:0px">
    <ul id="mytest" >
    </ul>
</div>
</body>
